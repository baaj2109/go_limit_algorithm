

### 限流演算法
 

 * 計數器算法

 `
固定時間窗口內對請求進行計數，與閥值進行比較判斷是否需要限流，到了時間臨界點，將計數器歸零
 `
 
  缺點 - 鄰近兩個時間點大量請求倒置系統崩潰

  * 漏桶算法

  `
  當有請求到來時，先放到木桶中，worker以固定速凍從木桶取出請求進行相應，如果木桶已經滿了，直接返回請求頻率超限的錯誤碼
  `

適用場景： 
流量最均勻的限流方式，例如保護數據庫的限流。先把對數據庫的訪問加入到木桶中，worker再以DB能承受的qps從木桶中取出請求，去訪問數據庫。不適用在電商搶購或社群軟體熱點事件

* 令牌桶

`
以固定速度往木桶加入令牌，木桶滿了則不再加入令牌，服務收到請求時嘗試從木桶取出一個令牌，如果能夠得到領牌則繼續執行後續業務，如果沒有，返回訪問頻率超限的錯誤
`

適用場景：
適合電商搶購瞬間大流量場景，因為在限流的同時可以對應一定的突發流量
